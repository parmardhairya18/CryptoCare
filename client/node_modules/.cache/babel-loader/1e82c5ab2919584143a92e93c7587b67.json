{"ast":null,"code":"'use strict';\n\nconst assert = require('assert');\n\nconst withIs = require('class-is');\n\nconst CID = require('cids');\n\nclass DAGNode {\n  constructor(data, links, serialized, multihash) {\n    assert(serialized, 'DAGNode needs its serialized format');\n    assert(multihash, 'DAGNode needs its multihash');\n    this._cid = new CID(multihash);\n    this._data = data || Buffer.alloc(0);\n    this._links = links || [];\n    this._serialized = serialized;\n  }\n\n  toJSON() {\n    if (!this._json) {\n      this._json = Object.freeze({\n        data: this.data,\n        links: this.links.map(l => l.toJSON()),\n        multihash: this._cid.toBaseEncodedString(),\n        size: this.size\n      });\n    }\n\n    return Object.assign({}, this._json);\n  }\n\n  toString() {\n    return `DAGNode <${this._cid.toBaseEncodedString()} - data: \"${this.data.toString()}\", links: ${this.links.length}, size: ${this.size}>`;\n  }\n\n  get data() {\n    return this._data;\n  }\n\n  set data(data) {\n    throw new Error(\"Can't set property: 'data' is immutable\");\n  }\n\n  get links() {\n    return this._links;\n  }\n\n  set links(links) {\n    throw new Error(\"Can't set property: 'links' is immutable\");\n  }\n\n  get serialized() {\n    return this._serialized;\n  }\n\n  set serialized(serialized) {\n    throw new Error(\"Can't set property: 'serialized' is immutable\");\n  }\n\n  get size() {\n    if (this._size === undefined) {\n      this._size = this.links.reduce((sum, l) => sum + l.size, this.serialized.length);\n    }\n\n    return this._size;\n  }\n\n  set size(size) {\n    throw new Error(\"Can't set property: 'size' is immutable\");\n  }\n\n  get multihash() {\n    return this._cid.buffer;\n  }\n\n  set multihash(multihash) {\n    throw new Error(\"Can't set property: 'multihash' is immutable\");\n  }\n\n  get cid() {\n    return this._cid;\n  }\n\n  set cid(cid) {\n    throw new Error(\"Can't set property: 'cid' is immutable\");\n  }\n\n}\n\nexports = module.exports = withIs(DAGNode, {\n  className: 'DAGNode',\n  symbolName: '@ipld/js-ipld-dag-pb/dagnode'\n});\nexports.create = require('./create');\nexports.clone = require('./clone');\nexports.addLink = require('./addLink');\nexports.rmLink = require('./rmLink');","map":{"version":3,"names":["assert","require","withIs","CID","DAGNode","constructor","data","links","serialized","multihash","_cid","_data","Buffer","alloc","_links","_serialized","toJSON","_json","Object","freeze","map","l","toBaseEncodedString","size","assign","toString","length","Error","_size","undefined","reduce","sum","buffer","cid","exports","module","className","symbolName","create","clone","addLink","rmLink"],"sources":["R:/New_Block/client/node_modules/ipfs-api/node_modules/ipld-dag-pb/src/dag-node/index.js"],"sourcesContent":["'use strict'\n\nconst assert = require('assert')\nconst withIs = require('class-is')\nconst CID = require('cids')\n\nclass DAGNode {\n  constructor (data, links, serialized, multihash) {\n    assert(serialized, 'DAGNode needs its serialized format')\n    assert(multihash, 'DAGNode needs its multihash')\n\n    this._cid = new CID(multihash)\n    this._data = data || Buffer.alloc(0)\n    this._links = links || []\n    this._serialized = serialized\n  }\n\n  toJSON () {\n    if (!this._json) {\n      this._json = Object.freeze({\n        data: this.data,\n        links: this.links.map((l) => l.toJSON()),\n        multihash: this._cid.toBaseEncodedString(),\n        size: this.size\n      })\n    }\n\n    return Object.assign({}, this._json)\n  }\n\n  toString () {\n    return `DAGNode <${this._cid.toBaseEncodedString()} - data: \"${this.data.toString()}\", links: ${this.links.length}, size: ${this.size}>`\n  }\n\n  get data () {\n    return this._data\n  }\n\n  set data (data) {\n    throw new Error(\"Can't set property: 'data' is immutable\")\n  }\n\n  get links () {\n    return this._links\n  }\n\n  set links (links) {\n    throw new Error(\"Can't set property: 'links' is immutable\")\n  }\n\n  get serialized () {\n    return this._serialized\n  }\n\n  set serialized (serialized) {\n    throw new Error(\"Can't set property: 'serialized' is immutable\")\n  }\n\n  get size () {\n    if (this._size === undefined) {\n      this._size = this.links.reduce((sum, l) => sum + l.size, this.serialized.length)\n    }\n\n    return this._size\n  }\n\n  set size (size) {\n    throw new Error(\"Can't set property: 'size' is immutable\")\n  }\n\n  get multihash () {\n    return this._cid.buffer\n  }\n\n  set multihash (multihash) {\n    throw new Error(\"Can't set property: 'multihash' is immutable\")\n  }\n\n  get cid () {\n    return this._cid\n  }\n\n  set cid (cid) {\n    throw new Error(\"Can't set property: 'cid' is immutable\")\n  }\n}\n\nexports = module.exports = withIs(DAGNode, { className: 'DAGNode', symbolName: '@ipld/js-ipld-dag-pb/dagnode' })\nexports.create = require('./create')\nexports.clone = require('./clone')\nexports.addLink = require('./addLink')\nexports.rmLink = require('./rmLink')\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}