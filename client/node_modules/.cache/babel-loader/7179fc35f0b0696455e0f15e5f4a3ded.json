{"ast":null,"code":"var Stream = require('stream');\n\nmodule.exports = duplex;\n\nmodule.exports.source = function (source) {\n  return duplex(null, source);\n};\n\nmodule.exports.sink = function (sink) {\n  return duplex(sink, null);\n};\n\nvar next = 'undefined' === typeof setImmediate ? process.nextTick : setImmediate;\n\nfunction duplex(reader, read) {\n  if (reader && 'object' === typeof reader) {\n    read = reader.source;\n    reader = reader.sink;\n  }\n\n  var cbs = [],\n      input = [],\n      ended,\n      needDrain;\n  var s = new Stream();\n  s.writable = s.readable = true;\n\n  s.write = function (data) {\n    if (cbs.length) cbs.shift()(null, data);else input.push(data);\n\n    if (!cbs.length) {\n      needDrain = true;\n    }\n\n    return !!cbs.length;\n  };\n\n  s.end = function () {\n    if (read) {\n      if (input.length) drain();else read(ended = true, cbs.length ? cbs.shift() : function () {});\n    } else if (cbs.length) {\n      cbs.shift()(true);\n    }\n  };\n\n  s.source = function (end, cb) {\n    if (input.length) {\n      cb(null, input.shift());\n      if (!input.length) s.emit('drain');\n    } else {\n      if (ended = ended || end) cb(ended);else cbs.push(cb);\n\n      if (needDrain) {\n        needDrain = false;\n        s.emit('drain');\n      }\n    }\n  };\n\n  var n;\n  if (reader) n = reader(s.source);\n  if (n && !read) read = n;\n  var output = [],\n      _cbs = [];\n  var _ended = false,\n      waiting = false,\n      busy = false;\n\n  s.sink = function (_read) {\n    read = _read;\n    next(drain);\n  };\n\n  if (read) {\n    s.sink(read);\n    var pipe = s.pipe.bind(s);\n\n    s.pipe = function (dest, opts) {\n      var res = pipe(dest, opts);\n      if (s.paused) s.resume();\n      return res;\n    };\n  }\n\n  function drain() {\n    waiting = false;\n    if (!read || busy) return;\n\n    while (output.length && !s.paused) {\n      s.emit('data', output.shift());\n    }\n\n    if (s.paused) return;\n    if (_ended) return s.emit('end');\n    busy = true;\n    read(null, function next(end, data) {\n      busy = false;\n\n      if (s.paused) {\n        if (end === true) _ended = end;else if (end) s.emit('error', end);else output.push(data);\n        waiting = true;\n      } else {\n        if (end && (ended = end) !== true) s.emit('error', end);else if (ended = ended || end) s.emit('end');else {\n          s.emit('data', data);\n          busy = true;\n          read(null, next);\n        }\n      }\n    });\n  }\n\n  s.pause = function () {\n    s.paused = true;\n    return s;\n  };\n\n  s.resume = function () {\n    s.paused = false;\n    drain();\n    return s;\n  };\n\n  s.destroy = function () {\n    if (!ended && read) read(ended = true, function () {});\n    ended = true;\n    if (cbs.length) cbs.shift()(true);\n    s.emit('close');\n  };\n\n  return s;\n}","map":{"version":3,"names":["Stream","require","module","exports","duplex","source","sink","next","setImmediate","process","nextTick","reader","read","cbs","input","ended","needDrain","s","writable","readable","write","data","length","shift","push","end","drain","cb","emit","n","output","_cbs","_ended","waiting","busy","_read","pipe","bind","dest","opts","res","paused","resume","pause","destroy"],"sources":["R:/CryptoCare/client/node_modules/pull-stream-to-stream/index.js"],"sourcesContent":["\nvar Stream = require('stream')\n\nmodule.exports = duplex\n\n\nmodule.exports.source = function (source) {\n  return duplex(null, source)\n}\n\nmodule.exports.sink = function (sink) {\n  return duplex(sink, null)\n}\n\nvar next = (\n  'undefined' === typeof setImmediate\n  ? process.nextTick\n  : setImmediate\n)\n\nfunction duplex (reader, read) {\n  if(reader && 'object' === typeof reader) {\n    read = reader.source\n    reader = reader.sink\n  }\n\n  var cbs = [], input = [], ended, needDrain\n  var s = new Stream()\n  s.writable = s.readable = true\n  s.write = function (data) {\n    if(cbs.length)\n      cbs.shift()(null, data)\n    else\n      input.push(data)\n\n    if (!cbs.length) {\n      needDrain = true\n    }\n    return !!cbs.length\n  }\n\n  s.end = function () {\n    if(read) {\n      if (input.length)\n        drain()\n      else\n        read(ended = true, cbs.length ? cbs.shift() : function () {})\n    } else if(cbs.length) {\n      cbs.shift()(true)\n    }\n  }\n\n  s.source = function (end, cb) {\n    if(input.length) {\n      cb(null, input.shift())\n      if(!input.length)\n        s.emit('drain')\n    }\n    else {\n      if(ended = ended || end)\n        cb(ended)\n      else\n        cbs.push(cb)\n\n      if (needDrain) {\n        needDrain = false\n        s.emit('drain')\n      }\n    }\n  }\n\n  var n\n  if(reader) n = reader(s.source)\n  if(n && !read) read = n\n\n  var output = [], _cbs = []\n  var _ended = false, waiting = false, busy = false\n\n  s.sink = function (_read) {\n    read = _read\n    next(drain)\n  }\n\n  if(read) {\n    s.sink(read)\n\n    var pipe = s.pipe.bind(s)\n    s.pipe = function (dest, opts) {\n      var res = pipe(dest, opts)\n\n      if(s.paused) s.resume()\n\n      return res\n    }\n  }\n\n  function drain () {\n    waiting = false\n    if(!read || busy) return\n    while(output.length && !s.paused) {\n      s.emit('data', output.shift())\n    }\n    if(s.paused) return\n    if(_ended)\n      return s.emit('end')\n\n    busy = true\n    read(null, function next (end, data) {\n      busy = false\n      if(s.paused) {\n        if(end === true) _ended = end\n        else if(end) s.emit('error', end)\n        else output.push(data)\n        waiting = true\n      } else {\n        if(end && (ended = end) !== true)\n          s.emit('error', end)\n        else if(ended = ended || end) s.emit('end')\n        else {\n          s.emit('data', data)\n          busy = true\n          read(null, next)\n        }\n      }\n    })\n  }\n\n  s.pause = function () {\n    s.paused = true\n    return s\n  }\n\n  s.resume = function () {\n    s.paused = false\n    drain()\n    return s\n  }\n\n  s.destroy = function () {\n    if(!ended && read)\n      read(ended = true, function () {})\n    ended = true\n    if(cbs.length)\n      cbs.shift()(true)\n\n    s.emit('close')\n  }\n\n  return s\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}