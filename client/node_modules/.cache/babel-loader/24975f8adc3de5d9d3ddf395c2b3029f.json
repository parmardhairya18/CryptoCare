{"ast":null,"code":"'use strict';\n\nconst dagNodeUtil = require('./util');\n\nconst cloneLinks = dagNodeUtil.cloneLinks;\nconst cloneData = dagNodeUtil.cloneData;\nconst toDAGLink = dagNodeUtil.toDAGLink;\n\nconst DAGLink = require('../dag-link');\n\nconst DAGNode = require('./index');\n\nconst create = require('./create');\n\nfunction addLink(node, link, callback) {\n  const links = cloneLinks(node);\n  const data = cloneData(node);\n\n  if (DAGLink.isDAGLink(link)) {// It's a DAGLink instance\n    // no need to do anything\n  } else if (DAGNode.isDAGNode(link)) {\n    // It's a DAGNode instance\n    // convert to link\n    link = toDAGLink(link);\n  } else {\n    // It's a Object with name, multihash/link and size\n    try {\n      link = new DAGLink(link.name, link.size, link.multihash || link.hash);\n    } catch (err) {\n      return callback(err);\n    }\n  }\n\n  links.push(link);\n  create(data, links, callback);\n}\n\nmodule.exports = addLink;","map":{"version":3,"names":["dagNodeUtil","require","cloneLinks","cloneData","toDAGLink","DAGLink","DAGNode","create","addLink","node","link","callback","links","data","isDAGLink","isDAGNode","name","size","multihash","hash","err","push","module","exports"],"sources":["R:/CryptoCare/client/node_modules/ipfs-api/node_modules/ipld-dag-pb/src/dag-node/addLink.js"],"sourcesContent":["'use strict'\n\nconst dagNodeUtil = require('./util')\nconst cloneLinks = dagNodeUtil.cloneLinks\nconst cloneData = dagNodeUtil.cloneData\nconst toDAGLink = dagNodeUtil.toDAGLink\nconst DAGLink = require('../dag-link')\nconst DAGNode = require('./index')\nconst create = require('./create')\n\nfunction addLink (node, link, callback) {\n  const links = cloneLinks(node)\n  const data = cloneData(node)\n\n  if (DAGLink.isDAGLink(link)) {\n    // It's a DAGLink instance\n    // no need to do anything\n  } else if (DAGNode.isDAGNode(link)) {\n    // It's a DAGNode instance\n    // convert to link\n    link = toDAGLink(link)\n  } else {\n    // It's a Object with name, multihash/link and size\n    try {\n      link = new DAGLink(link.name, link.size, link.multihash || link.hash)\n    } catch (err) {\n      return callback(err)\n    }\n  }\n\n  links.push(link)\n  create(data, links, callback)\n}\n\nmodule.exports = addLink\n"],"mappings":"AAAA;;AAEA,MAAMA,WAAW,GAAGC,OAAO,CAAC,QAAD,CAA3B;;AACA,MAAMC,UAAU,GAAGF,WAAW,CAACE,UAA/B;AACA,MAAMC,SAAS,GAAGH,WAAW,CAACG,SAA9B;AACA,MAAMC,SAAS,GAAGJ,WAAW,CAACI,SAA9B;;AACA,MAAMC,OAAO,GAAGJ,OAAO,CAAC,aAAD,CAAvB;;AACA,MAAMK,OAAO,GAAGL,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMM,MAAM,GAAGN,OAAO,CAAC,UAAD,CAAtB;;AAEA,SAASO,OAAT,CAAkBC,IAAlB,EAAwBC,IAAxB,EAA8BC,QAA9B,EAAwC;EACtC,MAAMC,KAAK,GAAGV,UAAU,CAACO,IAAD,CAAxB;EACA,MAAMI,IAAI,GAAGV,SAAS,CAACM,IAAD,CAAtB;;EAEA,IAAIJ,OAAO,CAACS,SAAR,CAAkBJ,IAAlB,CAAJ,EAA6B,CAC3B;IACA;EACD,CAHD,MAGO,IAAIJ,OAAO,CAACS,SAAR,CAAkBL,IAAlB,CAAJ,EAA6B;IAClC;IACA;IACAA,IAAI,GAAGN,SAAS,CAACM,IAAD,CAAhB;EACD,CAJM,MAIA;IACL;IACA,IAAI;MACFA,IAAI,GAAG,IAAIL,OAAJ,CAAYK,IAAI,CAACM,IAAjB,EAAuBN,IAAI,CAACO,IAA5B,EAAkCP,IAAI,CAACQ,SAAL,IAAkBR,IAAI,CAACS,IAAzD,CAAP;IACD,CAFD,CAEE,OAAOC,GAAP,EAAY;MACZ,OAAOT,QAAQ,CAACS,GAAD,CAAf;IACD;EACF;;EAEDR,KAAK,CAACS,IAAN,CAAWX,IAAX;EACAH,MAAM,CAACM,IAAD,EAAOD,KAAP,EAAcD,QAAd,CAAN;AACD;;AAEDW,MAAM,CAACC,OAAP,GAAiBf,OAAjB"},"metadata":{},"sourceType":"script"}